# Python ä¸­æ–‡æ³¨é‡Šè§„èŒƒ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å‚è€ƒ Rust ä¸­æ–‡æ³¨é‡Šè§„èŒƒï¼Œç»“åˆ Python è¯­è¨€ç‰¹æ€§ï¼Œæ€»ç»“çš„ Python ä¸­æ–‡æ³¨é‡Šè§„èŒƒï¼Œæ—¨åœ¨æä¾›æ¸…æ™°ã€ç»Ÿä¸€ã€æ˜“è¯»çš„ä»£ç æ–‡æ¡£æ ‡å‡†ã€‚

## ğŸ¯ æ³¨é‡Šç±»å‹

Python æ”¯æŒä¸‰ç§ç±»å‹çš„æ³¨é‡Šï¼š

| æ³¨é‡Šç±»å‹              | è¯­æ³•      | ç”¨é€”                           | æ˜¯å¦ç”Ÿæˆæ–‡æ¡£ |
| --------------------- | --------- | ------------------------------ | ------------ |
| **æ¨¡å—çº§æ–‡æ¡£å­—ç¬¦ä¸²**  | `"""` æˆ– `'''` | æè¿°æ•´ä¸ªæ¨¡å—çš„åŠŸèƒ½             | âœ… æ˜¯        |
| **å…¬å…± API æ–‡æ¡£å­—ç¬¦ä¸²** | `"""` æˆ– `'''` | æè¿°ç±»ã€å‡½æ•°ã€æ–¹æ³•ç­‰           | âœ… æ˜¯        |
| **è¡Œå†…æ³¨é‡Š**          | `#`       | è§£é‡Šä»£ç é€»è¾‘                   | âŒ å¦        |

---

## ğŸ“ æ¨¡å—çº§æ–‡æ¡£å­—ç¬¦ä¸²

### ä½¿ç”¨åœºæ™¯

ç”¨äºæè¿°æ•´ä¸ªæ¨¡å—ï¼ˆ`.py` æ–‡ä»¶ï¼‰çš„åŠŸèƒ½ã€è®¾è®¡ç†å¿µå’Œä½¿ç”¨æ–¹å¼ã€‚é€šå¸¸æ”¾åœ¨æ–‡ä»¶å¼€å¤´ï¼Œåœ¨ `import` è¯­å¥ä¹‹å‰ã€‚

### åŸºæœ¬æ ¼å¼

```python
"""
æ¨¡å—ç®€è¦æè¿°

æ¨¡å—çš„è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œã€‚

æ ¸å¿ƒæ¦‚å¿µ
--------

- **æ¦‚å¿µ1**: è¯´æ˜
- **æ¦‚å¿µ2**: è¯´æ˜

ä½¿ç”¨æ–¹å¼
--------

1. æ­¥éª¤ä¸€
2. æ­¥éª¤äºŒ

æ³¨æ„äº‹é¡¹
--------

é‡è¦æç¤ºæˆ–è­¦å‘Šä¿¡æ¯ã€‚
"""
```

### ç¤ºä¾‹

```python
"""
æœåŠ¡ä¾èµ–æ³¨å…¥æ¨¡å—

æœ¬æ¨¡å—å®ç°äº†è¿è¡Œæ—¶ä¾èµ–æ³¨å…¥åŠŸèƒ½ï¼Œå…è®¸æœåŠ¡è‡ªåŠ¨æ³¨å…¥ä¾èµ–çš„ç»„ä»¶å’Œé…ç½®ã€‚

æ ¸å¿ƒæ¦‚å¿µ
--------

- **Service**: ç‰¹æ®Šçš„ç»„ä»¶ï¼Œæ”¯æŒé€šè¿‡å­—æ®µå±æ€§è‡ªåŠ¨æ³¨å…¥ä¾èµ–
- **ServiceRegistry**: æœåŠ¡æ³¨å†Œè¡¨ï¼Œè´Ÿè´£å°†æœåŠ¡æ³¨å†Œåˆ°åº”ç”¨ä¸­
- **è‡ªåŠ¨æ³¨å…¥**: åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å‘ç°å¹¶å®‰è£…æ‰€æœ‰æœåŠ¡

ä½¿ç”¨æ–¹å¼
--------

1. å®šä¹‰æœåŠ¡ç±»ï¼Œç»§æ‰¿ `Service` åŸºç±»
2. ä½¿ç”¨ `@inject` è£…é¥°å™¨æ ‡è®°éœ€è¦æ³¨å…¥çš„å­—æ®µ
3. æ¡†æ¶ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œæ‰€æœ‰æœåŠ¡

ä¾èµ–è§£æ
--------

æœåŠ¡æ³¨å†Œæ—¶ä¼šè‡ªåŠ¨è§£æä¾èµ–å…³ç³»ï¼Œç¡®ä¿ä¾èµ–çš„æœåŠ¡å…ˆäºè¢«ä¾èµ–çš„æœåŠ¡æ³¨å†Œã€‚
"""

from typing import Optional, Dict, Any
```

### æ¨èç« èŠ‚ç»“æ„

- **æ¦‚è¿°**ï¼šæ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½å’Œç›®çš„
- **æ ¸å¿ƒæ¦‚å¿µ**ï¼šå…³é”®æœ¯è¯­å’Œæ¦‚å¿µè§£é‡Š
- **ä½¿ç”¨æ–¹å¼**ï¼šåŸºæœ¬ä½¿ç”¨æ­¥éª¤
- **å·¥ä½œåŸç†**ï¼šå†…éƒ¨å®ç°æœºåˆ¶ï¼ˆå¦‚éœ€è¦ï¼‰
- **æ³¨æ„äº‹é¡¹**ï¼šé‡è¦æç¤ºæˆ–é™åˆ¶

---

## ğŸ“š å…¬å…± API æ–‡æ¡£å­—ç¬¦ä¸²

### ä½¿ç”¨åœºæ™¯

ç”¨äºæè¿°å…¬å…±ç±»ã€å‡½æ•°ã€æ–¹æ³•ã€å±æ€§ç­‰å…¬å…± APIã€‚

### åŸºæœ¬æ ¼å¼ï¼ˆGoogle é£æ ¼ï¼‰

```python
def function_name(param1: Type1, param2: Type2) -> ReturnType:
    """åŠŸèƒ½ç®€è¦æè¿°

    è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œã€‚

    Args:
        param1: å‚æ•°è¯´æ˜
        param2: å‚æ•°è¯´æ˜

    Returns:
        è¿”å›å€¼è¯´æ˜

    Raises:
        ExceptionType: å¯èƒ½çš„é”™è¯¯æƒ…å†µè¯´æ˜

    Example:
        >>> function_name(value1, value2)
        result

    Note:
        é‡è¦æç¤ºæˆ–é™åˆ¶ã€‚
    """
    pass
```

### åŸºæœ¬æ ¼å¼ï¼ˆNumPy é£æ ¼ï¼‰

```python
def function_name(param1: Type1, param2: Type2) -> ReturnType:
    """åŠŸèƒ½ç®€è¦æè¿°

    è¯¦ç»†è¯´æ˜ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œã€‚

    Parameters
    ----------
    param1 : Type1
        å‚æ•°è¯´æ˜
    param2 : Type2
        å‚æ•°è¯´æ˜

    Returns
    -------
    ReturnType
        è¿”å›å€¼è¯´æ˜

    Raises
    ------
    ExceptionType
        å¯èƒ½çš„é”™è¯¯æƒ…å†µè¯´æ˜

    Examples
    --------
    >>> function_name(value1, value2)
    result

    Notes
    -----
    é‡è¦æç¤ºæˆ–é™åˆ¶ã€‚
    """
    pass
```

### ç¤ºä¾‹ï¼šå‡½æ•°æ³¨é‡Šï¼ˆGoogle é£æ ¼ï¼‰

```python
def auto_inject_services(app: AppBuilder) -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡åˆ°åº”ç”¨ä¸­

    æŸ¥æ‰¾æ‰€æœ‰å·²æ³¨å†Œçš„æœåŠ¡å¹¶å°†å®ƒä»¬å®‰è£…åˆ°åº”ç”¨ä¸­ã€‚

    å·¥ä½œåŸç†
    --------

    1. æ”¶é›†æ‰€æœ‰é€šè¿‡è£…é¥°å™¨æ³¨å†Œçš„æœåŠ¡
    2. å¾ªç¯å®‰è£…æœåŠ¡ï¼Œç›´åˆ°æ‰€æœ‰æœåŠ¡éƒ½å®‰è£…æˆåŠŸï¼š
       - å°è¯•å®‰è£…æ¯ä¸ªå¾…å®‰è£…çš„æœåŠ¡
       - å¦‚æœæˆåŠŸï¼Œä»å¾…å®‰è£…åˆ—è¡¨ç§»é™¤
       - å¦‚æœå¤±è´¥ï¼ˆå¯èƒ½æ˜¯ä¾èµ–æœªæ»¡è¶³ï¼‰ï¼Œä¿ç•™åœ¨å¾…å®‰è£…åˆ—è¡¨
    3. å¦‚æœä¸€è½®ä¸­æ²¡æœ‰è¿›å±•ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–ï¼ŒæŠ›å‡ºå¼‚å¸¸

    Args:
        app: åº”ç”¨æ„å»ºå™¨å®ä¾‹

    Raises:
        DependencyError: å¦‚æœå­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–

    Example:
        >>> app = AppBuilder()
        >>> auto_inject_services(app)
        >>> # ç°åœ¨æ‰€æœ‰æœåŠ¡éƒ½å·²å®‰è£…

    Note:
        ä½¿ç”¨æ‹“æ‰‘æ’åºç®—æ³•è§£ææœåŠ¡ä¾èµ–å…³ç³»ã€‚
    """
    pass
```

### ç¤ºä¾‹ï¼šç±»æ³¨é‡Š

```python
class Service:
    """Service åŸºç±»ï¼šæ”¯æŒä¾èµ–æ³¨å…¥çš„ç‰¹æ®Šç»„ä»¶

    Service æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡å­—æ®µå±æ€§è‡ªåŠ¨æ³¨å…¥ä¾èµ–çš„ç»„ä»¶å’Œé…ç½®ã€‚

    å®ç°è¦æ±‚
    --------

    - å¿…é¡»ç»§æ‰¿ `Service` åŸºç±»
    - å¿…é¡»å®ç° `build()` æ–¹æ³•ï¼Œç”¨äºä»æ³¨å†Œè¡¨æ„å»ºæœåŠ¡å®ä¾‹

    ä½¿ç”¨ç¤ºä¾‹
    --------

    ```python
    class UserService(Service):
        def __init__(self, db: Database):
            self.db = db

        def build(registry: Registry) -> 'UserService':
            db = registry.get_component(Database)
            return UserService(db)
    ```

    å·¥ä½œåŸç†
    --------

    1. å­ç±»é€šè¿‡ `@service` è£…é¥°å™¨è‡ªåŠ¨æ³¨å†Œ
    2. æœåŠ¡åœ¨åº”ç”¨å¯åŠ¨æ—¶é€šè¿‡ `inventory` è‡ªåŠ¨å‘ç°
    3. åº”ç”¨æ„å»ºæ—¶ï¼Œ`auto_inject_services()` ä¼šéå†æ‰€æœ‰æ³¨å†Œçš„æœåŠ¡
    4. æŒ‰ç…§ä¾èµ–é¡ºåºå®‰è£…æœåŠ¡ï¼Œç¡®ä¿ä¾èµ–çš„æœåŠ¡å…ˆå®‰è£…

    Attributes:
        registry: æœåŠ¡æ³¨å†Œè¡¨ï¼Œç”¨äºè·å–ä¾èµ–ç»„ä»¶
    """
    pass
```

### ç¤ºä¾‹ï¼šæ–¹æ³•æ³¨é‡Š

```python
def build(self, registry: Registry) -> 'Service':
    """ä»æ³¨å†Œè¡¨æ„å»ºæœåŠ¡ç»„ä»¶

    æ­¤æ–¹æ³•ç”±å­ç±»å®ç°ï¼Œä¼šï¼š
    1. ä»ç»„ä»¶æ³¨å†Œè¡¨è·å–æ ‡è®°ä¸º `@inject` çš„å­—æ®µ
    2. ä»é…ç½®æ³¨å†Œè¡¨è·å–æ ‡è®°ä¸º `@inject_config` çš„å­—æ®µ
    3. æ„å»ºå¹¶è¿”å›æœåŠ¡å®ä¾‹

    Args:
        registry: ç»„ä»¶å’Œé…ç½®æ³¨å†Œè¡¨

    Returns:
        æ„å»ºçš„æœåŠ¡å®ä¾‹

    Raises:
        ComponentNotFoundError: å¦‚æœä¾èµ–çš„ç»„ä»¶æœªæ‰¾åˆ°
        ConfigNotFoundError: å¦‚æœä¾èµ–çš„é…ç½®æœªæ‰¾åˆ°
    """
    pass
```

### æ¨èç« èŠ‚ç»“æ„

æ ¹æ® API çš„å¤æ‚åº¦ï¼Œå¯ä»¥åŒ…å«ä»¥ä¸‹ç« èŠ‚ï¼š

- **æ¦‚è¿°**ï¼šåŠŸèƒ½ç®€è¦æè¿°ï¼ˆå¿…éœ€ï¼‰
- **å·¥ä½œåŸç†**ï¼šå†…éƒ¨å®ç°æœºåˆ¶ï¼ˆå¦‚éœ€è¦ï¼‰
- **Args/Parameters**ï¼šå‡½æ•°å‚æ•°è¯´æ˜
- **Returns**ï¼šè¿”å›å€¼è¯´æ˜
- **Raises/Exceptions**ï¼šå¯èƒ½çš„é”™è¯¯æƒ…å†µ
- **Example/Examples**ï¼šä»£ç ç¤ºä¾‹ï¼ˆå¼ºçƒˆæ¨èï¼‰
- **Note/Notes**ï¼šé‡è¦æç¤ºæˆ–é™åˆ¶
- **Attributes**ï¼šç±»å±æ€§è¯´æ˜ï¼ˆå¯¹äºç±»ï¼‰
- **Methods**ï¼šç±»æ–¹æ³•è¯´æ˜ï¼ˆå¯¹äºç±»ï¼‰

---

## ğŸ’¬ è¡Œå†…æ³¨é‡Š

### ä½¿ç”¨åœºæ™¯

ç”¨äºè§£é‡Šä»£ç é€»è¾‘ã€ç®—æ³•æ­¥éª¤ã€å…³é”®å†³ç­–ç­‰ã€‚

### åŸºæœ¬æ ¼å¼

```python
# ç®€æ´è¯´æ˜ä»£ç æ„å›¾
result = calculate()

# å¤šè¡Œæ³¨é‡Šå¯ä»¥è¿™æ ·å†™ï¼š
# ç¬¬ä¸€è¡Œè¯´æ˜
# ç¬¬äºŒè¡Œè¯´æ˜
```

### ç¤ºä¾‹

```python
# æ”¶é›†æ‰€æœ‰æœåŠ¡æ³¨å†Œå™¨
registrars = [r for r in ServiceRegistry.get_all()]

# å¾ªç¯å®‰è£…æœåŠ¡ï¼Œç›´åˆ°æ‰€æœ‰æœåŠ¡éƒ½å®‰è£…æˆåŠŸ
pending = list(registrars)
installed = 0

while pending:
    next_pending = []
    progress_made = False

    # å°è¯•å®‰è£…æ¯ä¸ªå¾…å®‰è£…çš„æœåŠ¡
    for registrar in pending:
        try:
            registrar.install(app)
            # å®‰è£…æˆåŠŸ
            installed += 1
            progress_made = True
        except DependencyError:
            # å®‰è£…å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ä¾èµ–æœªæ»¡è¶³ï¼‰ï¼Œç­‰å¾…ä¸‹ä¸€è½®
            next_pending.append(registrar)

    # å¦‚æœä¸€è½®ä¸­æ²¡æœ‰è¿›å±•ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–
    if not progress_made and next_pending:
        raise DependencyError("å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–")
    
    pending = next_pending
```

### æ³¨é‡ŠåŸåˆ™

- **ç®€æ´æ˜äº†**ï¼šæ³¨é‡Šåº”è¯¥ç®€æ´ï¼Œé¿å…å†—é•¿
- **è§£é‡Š"ä¸ºä»€ä¹ˆ"**ï¼šä¼˜å…ˆè§£é‡Šä»£ç çš„æ„å›¾å’ŒåŸå› ï¼Œè€Œé"æ˜¯ä»€ä¹ˆ"
- **é¿å…é‡å¤**ï¼šä¸è¦é‡å¤ä»£ç æœ¬èº«å·²ç»è¡¨è¾¾æ¸…æ¥šçš„å†…å®¹
- **åŠæ—¶æ›´æ–°**ï¼šä»£ç ä¿®æ”¹æ—¶ï¼ŒåŒæ­¥æ›´æ–°ç›¸å…³æ³¨é‡Š

---

## ğŸ“– Markdown æ ¼å¼æ”¯æŒ

Python æ–‡æ¡£å­—ç¬¦ä¸²æ”¯æŒå®Œæ•´çš„ Markdown è¯­æ³•ï¼ˆåœ¨å¤§å¤šæ•°æ–‡æ¡£ç”Ÿæˆå·¥å…·ä¸­ï¼‰ã€‚

### å¸¸ç”¨ Markdown å…ƒç´ 

#### æ ‡é¢˜

```python
"""
# ä¸€çº§æ ‡é¢˜
## äºŒçº§æ ‡é¢˜
### ä¸‰çº§æ ‡é¢˜
"""
```

#### åˆ—è¡¨

```python
"""
- æ— åºåˆ—è¡¨é¡¹ 1
- æ— åºåˆ—è¡¨é¡¹ 2

1. æœ‰åºåˆ—è¡¨é¡¹ 1
2. æœ‰åºåˆ—è¡¨é¡¹ 2
"""
```

#### å¼ºè°ƒ

```python
"""
è¿™æ˜¯ **ç²—ä½“** æ–‡æœ¬
è¿™æ˜¯ *æ–œä½“* æ–‡æœ¬
è¿™æ˜¯ ``ä»£ç `` æ–‡æœ¬
"""
```

#### ä»£ç å—

```python
"""
```python
# ç¤ºä¾‹ä»£ç 
result = function_name(value1, value2)
```
"""
```

#### è¡¨æ ¼

```python
"""
| åˆ—1 | åˆ—2 | åˆ—3 |
|-----|-----|-----|
| å€¼1 | å€¼2 | å€¼3 |
"""
```

#### é“¾æ¥

```python
"""
æŸ¥çœ‹ [Python å®˜æ–¹æ–‡æ¡£](https://docs.python.org/)
å‚è€ƒ `Service` ç±»
"""
```

---

## ğŸ¨ ç±»å‹æ³¨è§£

### åŸºæœ¬ç”¨æ³•

Python 3.5+ æ”¯æŒç±»å‹æ³¨è§£ï¼Œå»ºè®®åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨ï¼š

```python
from typing import Optional, List, Dict, Any, Union

def get_user_info(
    user_id: int,
    include_profile: bool = False
) -> Optional[Dict[str, Any]]:
    """è·å–ç”¨æˆ·ä¿¡æ¯

    Args:
        user_id: ç”¨æˆ· ID
        include_profile: æ˜¯å¦åŒ…å«ç”¨æˆ·èµ„æ–™ï¼Œé»˜è®¤ä¸º False

    Returns:
        ç”¨æˆ·ä¿¡æ¯å­—å…¸ï¼Œå¦‚æœç”¨æˆ·ä¸å­˜åœ¨åˆ™è¿”å› None
    """
    pass
```

### å¤æ‚ç±»å‹æ³¨è§£

```python
from typing import List, Dict, Optional, Union, Tuple

def process_data(
    items: List[Dict[str, Union[int, str]]],
    filters: Optional[List[str]] = None
) -> Tuple[List[Dict], int]:
    """å¤„ç†æ•°æ®é¡¹

    Args:
        items: æ•°æ®é¡¹åˆ—è¡¨ï¼Œæ¯ä¸ªé¡¹æ˜¯åŒ…å«æ•´æ•°æˆ–å­—ç¬¦ä¸²çš„å­—å…¸
        filters: å¯é€‰çš„è¿‡æ»¤å™¨åˆ—è¡¨

    Returns:
        å¤„ç†åçš„æ•°æ®åˆ—è¡¨å’Œæ€»æ•°
    """
    pass
```

---

## ğŸ¯ å¤æ‚å‡½æ•°çš„äººæ€§åŒ–æ³¨é‡ŠæŒ‡å—

å¯¹äºå¤æ‚çš„å‡½æ•°ï¼Œéœ€è¦ç¼–å†™æ›´åŠ äººæ€§åŒ–ã€é€šä¿—æ˜“æ‡‚çš„æ–‡æ¡£æ³¨é‡Šï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿç†è§£å‡½æ•°çš„ç›®çš„ã€å·¥ä½œåŸç†å’Œä½¿ç”¨æ–¹å¼ã€‚

### ç¼–å†™åŸåˆ™

1. **ç”¨é€šä¿—è¯­è¨€è§£é‡Š**ï¼šé¿å…è¿‡äºæŠ€æœ¯åŒ–çš„æœ¯è¯­ï¼Œç”¨æ—¥å¸¸è¯­è¨€è§£é‡Šæ¦‚å¿µ
2. **æä¾›èƒŒæ™¯ä¿¡æ¯**ï¼šè¯´æ˜å‡½æ•°è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°
3. **åˆ†æ­¥éª¤è¯´æ˜**ï¼šå°†å¤æ‚è¿‡ç¨‹åˆ†è§£ä¸ºæ¸…æ™°çš„æ­¥éª¤
4. **ä½¿ç”¨ç±»æ¯”**ï¼šç”¨ç†Ÿæ‚‰çš„æ¦‚å¿µç±»æ¯”å¤æ‚çš„æ¦‚å¿µ
5. **æä¾›å®é™…åœºæ™¯**ï¼šè¯´æ˜åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ªå‡½æ•°
6. **è§£é‡Šå…³é”®å†³ç­–**ï¼šè¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·å®ç°ï¼Œæœ‰ä»€ä¹ˆè€ƒè™‘

### å¯¹æ¯”ç¤ºä¾‹ï¼šä¸å¥½çš„æ³¨é‡Š vs å¥½çš„æ³¨é‡Š

#### âŒ ä¸å¥½çš„æ³¨é‡Šï¼ˆè¿‡äºæŠ€æœ¯åŒ–ï¼Œéš¾ä»¥ç†è§£ï¼‰

```python
def auto_inject_services(app: AppBuilder) -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡

    éå† inventory æ”¶é›†çš„ ServiceRegistryï¼Œé€šè¿‡æ‹“æ‰‘æ’åºè§£æä¾èµ–ï¼Œ
    å¾ªç¯è°ƒç”¨ install_service ç›´åˆ°æ‰€æœ‰æœåŠ¡å®‰è£…å®Œæˆæˆ–æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–ã€‚

    Args:
        app: AppBuilder å®ä¾‹
    """
    pass
```

**é—®é¢˜**ï¼š

- ç›´æ¥ä½¿ç”¨æŠ€æœ¯æœ¯è¯­ï¼ˆinventoryã€æ‹“æ‰‘æ’åºï¼‰ï¼Œæ²¡æœ‰è§£é‡Š
- æ²¡æœ‰è¯´æ˜ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°
- æ²¡æœ‰è§£é‡Š"å¾ªç¯ä¾èµ–"æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°
- ç¼ºå°‘ä½¿ç”¨åœºæ™¯è¯´æ˜

#### âœ… å¥½çš„æ³¨é‡Šï¼ˆäººæ€§åŒ–ã€é€šä¿—æ˜“æ‡‚ï¼‰

```python
def auto_inject_services(app: AppBuilder) -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡åˆ°åº”ç”¨ä¸­

    è¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±åƒ"è‡ªåŠ¨è£…é…å·¥"ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰éœ€è¦å®‰è£…çš„æœåŠ¡ï¼Œ
    å¹¶æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæŠŠå®ƒä»¬å®‰è£…åˆ°åº”ç”¨ä¸­ã€‚

    ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ
    --------------------

    åœ¨åº”ç”¨ä¸­ï¼ŒæœåŠ¡ä¹‹é—´å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ã€‚æ¯”å¦‚ï¼š
    - ç”¨æˆ·æœåŠ¡éœ€è¦æ•°æ®åº“è¿æ¥
    - è®¢å•æœåŠ¡éœ€è¦ç”¨æˆ·æœåŠ¡å’Œæ•°æ®åº“è¿æ¥

    å¦‚æœå…ˆå®‰è£…è®¢å•æœåŠ¡ï¼Œå†å®‰è£…ç”¨æˆ·æœåŠ¡ï¼Œå°±ä¼šå‡ºé”™ï¼Œå› ä¸ºè®¢å•æœåŠ¡ä¾èµ–çš„ç”¨æˆ·æœåŠ¡è¿˜ä¸å­˜åœ¨ã€‚
    è¿™ä¸ªå‡½æ•°ä¼šè‡ªåŠ¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿ä¾èµ–çš„æœåŠ¡æ€»æ˜¯å…ˆäºè¢«ä¾èµ–çš„æœåŠ¡å®‰è£…ã€‚

    å·¥ä½œåŸç†ï¼ˆç®€å•ç†è§£ï¼‰
    ------------------

    æƒ³è±¡ä¸€ä¸‹æ•´ç†ä¹¦æ¶çš„è¿‡ç¨‹ï¼š

    1. **æ”¶é›†æ‰€æœ‰ä¹¦**ï¼šæ‰¾åˆ°æ‰€æœ‰éœ€è¦å®‰è£…çš„æœåŠ¡ï¼ˆå°±åƒæ”¶é›†æ‰€æœ‰è¦æ”¾ä¸Šä¹¦æ¶çš„ä¹¦ï¼‰
    2. **å°è¯•æ‘†æ”¾**ï¼šå°è¯•å®‰è£…æ¯ä¸ªæœåŠ¡
       - å¦‚æœæœåŠ¡çš„ä¾èµ–éƒ½å·²ç»å®‰è£…å¥½äº†ï¼Œå°±å®‰è£…è¿™ä¸ªæœåŠ¡ï¼ˆå°±åƒä¹¦çš„å‰ç½®ä¹¦ç±éƒ½å·²ç»åœ¨ä¹¦æ¶ä¸Šäº†ï¼‰
       - å¦‚æœä¾èµ–è¿˜æ²¡å®‰è£…ï¼Œå°±æš‚æ—¶è·³è¿‡ï¼Œç­‰ä¸‹ä¸€è½®å†è¯•ï¼ˆå°±åƒå‰ç½®ä¹¦ç±è¿˜æ²¡åˆ°ï¼Œå…ˆæ”¾ä¸€è¾¹ï¼‰
    3. **é‡å¤ç›´åˆ°å®Œæˆ**ï¼šé‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°æ‰€æœ‰æœåŠ¡éƒ½å®‰è£…æˆåŠŸ
    4. **æ£€æµ‹é—®é¢˜**ï¼šå¦‚æœä¸€è½®ä¸‹æ¥æ²¡æœ‰ä»»ä½•è¿›å±•ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–ï¼ŒæŠ›å‡ºå¼‚å¸¸

    å®é™…ä½¿ç”¨åœºæ™¯
    -----------

    é€šå¸¸åœ¨åº”ç”¨å¯åŠ¨æ—¶è°ƒç”¨ï¼Œä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰æœåŠ¡ï¼š

    ```python
    app = AppBuilder()

    # é…ç½®æ•°æ®åº“ã€æ—¥å¿—ç­‰åŸºç¡€ç»„ä»¶
    app.add_component(database)
    app.add_component(logger)

    # è‡ªåŠ¨å®‰è£…æ‰€æœ‰æœåŠ¡ï¼ˆç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ç­‰ï¼‰
    auto_inject_services(app)

    # ç°åœ¨æ‰€æœ‰æœåŠ¡éƒ½å¯ä»¥ä½¿ç”¨äº†
    app.run()
    ```

    å¯èƒ½é‡åˆ°çš„é—®é¢˜
    ------------

    å¾ªç¯ä¾èµ–
    ^^^^^^^

    å¦‚æœæœåŠ¡ A ä¾èµ–æœåŠ¡ Bï¼ŒæœåŠ¡ B åˆä¾èµ–æœåŠ¡ Aï¼Œå°±ä¼šå½¢æˆå¾ªç¯ä¾èµ–ã€‚
    è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¼šæŠ›å‡º `DependencyError` å¼‚å¸¸ï¼Œæç¤ºä½ æ£€æŸ¥æœåŠ¡çš„ä¾èµ–å…³ç³»ã€‚

    ç¼ºå°‘ä¾èµ–
    ^^^^^^^

    å¦‚æœæœåŠ¡ä¾èµ–çš„ç»„ä»¶æˆ–é…ç½®è¿˜æ²¡æœ‰æ·»åŠ åˆ°åº”ç”¨ä¸­ï¼Œå‡½æ•°ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
    ç¡®ä¿åœ¨è°ƒç”¨æ­¤å‡½æ•°ä¹‹å‰ï¼Œæ‰€æœ‰å¿…éœ€çš„ç»„ä»¶éƒ½å·²ç»æ·»åŠ åˆ°åº”ç”¨ä¸­ã€‚

    Args:
        app: åº”ç”¨æ„å»ºå™¨ï¼Œç”¨äºå®‰è£…æœåŠ¡

    Raises:
        DependencyError: å¦‚æœå­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–

    Example:
        >>> app = AppBuilder()
        >>> app.add_component(create_database_pool())
        >>> auto_inject_services(app)
        >>> print("æ‰€æœ‰æœåŠ¡å®‰è£…æˆåŠŸï¼")
    """
    pass
```

**ä¼˜ç‚¹**ï¼š

- ç”¨"è‡ªåŠ¨è£…é…å·¥"ç±»æ¯”ï¼Œå½¢è±¡æ˜“æ‡‚
- è§£é‡Šäº†ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼ˆä¾èµ–å…³ç³»é—®é¢˜ï¼‰
- ç”¨"æ•´ç†ä¹¦æ¶"ç±»æ¯”å·¥ä½œåŸç†ï¼Œå®¹æ˜“ç†è§£
- æä¾›äº†å®é™…ä½¿ç”¨åœºæ™¯
- è¯´æ˜äº†å¯èƒ½é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### å¤æ‚å‡½æ•°æ³¨é‡Šæ¨¡æ¿

```python
def complex_function(param1: Type1, param2: Type2) -> ReturnType:
    """[å‡½æ•°åŠŸèƒ½ç®€è¦æè¿°]

    [ç”¨ä¸€å¥è¯æˆ–ä¸€ä¸ªç±»æ¯”è¯´æ˜è¿™ä¸ªå‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œè®©è¯»è€…å¿«é€Ÿç†è§£]

    ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ
    --------------------

    [è¯´æ˜è¿™ä¸ªå‡½æ•°è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆéœ€è¦å®ƒ]

    å·¥ä½œåŸç†ï¼ˆç®€å•ç†è§£ï¼‰
    ------------------

    [ç”¨é€šä¿—è¯­è¨€æˆ–ç±»æ¯”è§£é‡Šå·¥ä½œåŸç†ï¼Œå¯ä»¥åˆ†æ­¥éª¤è¯´æ˜]

    1. [æ­¥éª¤ä¸€ï¼šç”¨æ—¥å¸¸è¯­è¨€æè¿°]
    2. [æ­¥éª¤äºŒï¼šç”¨æ—¥å¸¸è¯­è¨€æè¿°]
    3. [æ­¥éª¤ä¸‰ï¼šç”¨æ—¥å¸¸è¯­è¨€æè¿°]

    å®é™…ä½¿ç”¨åœºæ™¯
    -----------

    [è¯´æ˜åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œæä¾›å®é™…åœºæ™¯]

    ```python
    # ä½¿ç”¨ç¤ºä¾‹
    ```

    å¯èƒ½é‡åˆ°çš„é—®é¢˜
    ------------

    é—®é¢˜ä¸€
    ^^^^^

    [è§£é‡Šé—®é¢˜æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•é¿å…æˆ–è§£å†³]

    é—®é¢˜äºŒ
    ^^^^^

    [è§£é‡Šé—®é¢˜æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•é¿å…æˆ–è§£å†³]

    Args:
        param1: [å‚æ•°è¯´æ˜ï¼Œç”¨é€šä¿—è¯­è¨€]

    Returns:
        [è¿”å›å€¼è¯´æ˜ï¼Œç”¨é€šä¿—è¯­è¨€]

    Raises:
        ExceptionType: [å¼‚å¸¸è¯´æ˜]

    Example:
        >>> # å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
    """
    pass
```

### æ›´å¤šäººæ€§åŒ–æ³¨é‡Šç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šä¾èµ–è§£æå‡½æ•°

```python
def resolve_dependencies(services: List[Service]) -> List[Service]:
    """è§£ææœåŠ¡ä¾èµ–å…³ç³»ï¼Œç¡®å®šå®‰è£…é¡ºåº

    è¿™ä¸ªå‡½æ•°å°±åƒä¸€ä¸ª"ä»»åŠ¡è°ƒåº¦å™¨"ï¼Œå®ƒä¼šåˆ†ææ‰€æœ‰æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œ
    ç„¶åå‘Šè¯‰ä½ åº”è¯¥æŒ‰ç…§ä»€ä¹ˆé¡ºåºå®‰è£…è¿™äº›æœåŠ¡ã€‚

    ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ
    --------------------

    æƒ³è±¡ä½ è¦åšä¸€é¡¿é¥­ï¼š
    - åšèœéœ€è¦å…ˆæ´—èœ
    - ç‚’èœéœ€è¦å…ˆåˆ‡èœ
    - åˆ‡èœéœ€è¦å…ˆæ´—èœ

    å¦‚æœä½ ä¸æŒ‰é¡ºåºæ¥ï¼Œæ¯”å¦‚å…ˆç‚’èœå†æ´—èœï¼Œå°±ä¼šå‡ºé—®é¢˜ã€‚
    æœåŠ¡å®‰è£…ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¿…é¡»æŒ‰ç…§ä¾èµ–é¡ºåºæ¥ã€‚

    å·¥ä½œåŸç†
    --------

    è¿™ä¸ªå‡½æ•°ä½¿ç”¨"æ‹“æ‰‘æ’åº"ç®—æ³•ï¼ˆå°±åƒæ•´ç†ä»»åŠ¡æ¸…å•ä¸€æ ·ï¼‰ï¼š

    1. **å»ºç«‹ä¾èµ–å›¾**ï¼šç”»å‡ºæ‰€æœ‰æœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»
       - ç”¨æˆ·æœåŠ¡ â†’ ä¾èµ– â†’ æ•°æ®åº“è¿æ¥
       - è®¢å•æœåŠ¡ â†’ ä¾èµ– â†’ ç”¨æˆ·æœåŠ¡ã€æ•°æ®åº“è¿æ¥

    2. **æ‰¾åˆ°èµ·ç‚¹**ï¼šæ‰¾å‡ºä¸ä¾èµ–ä»»ä½•å…¶ä»–æœåŠ¡çš„æœåŠ¡ï¼ˆå°±åƒæ‰¾åˆ°å¯ä»¥ç«‹å³å¼€å§‹çš„ä»»åŠ¡ï¼‰

    3. **é€æ­¥æ‰©å±•**ï¼šå®‰è£…è¿™äº›æœåŠ¡åï¼Œå†å®‰è£…ä¾èµ–å®ƒä»¬çš„æœåŠ¡

    4. **æ£€æµ‹å¾ªç¯**ï¼šå¦‚æœå‘ç°å¾ªç¯ä¾èµ–ï¼ˆA ä¾èµ– Bï¼ŒB åˆä¾èµ– Aï¼‰ï¼ŒæŠ›å‡ºå¼‚å¸¸

    å®é™…ä½¿ç”¨åœºæ™¯
    -----------

    é€šå¸¸åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œåœ¨å®‰è£…æœåŠ¡ä¹‹å‰è°ƒç”¨ï¼Œç¡®ä¿å®‰è£…é¡ºåºæ­£ç¡®ï¼š

    ```python
    # è§£æä¾èµ–å…³ç³»
    install_order = resolve_dependencies(services)

    # æŒ‰ç…§é¡ºåºå®‰è£…
    for service in install_order:
        service.install(app)
    ```

    Args:
        services: æ‰€æœ‰éœ€è¦å®‰è£…çš„æœåŠ¡åˆ—è¡¨

    Returns:
        æŒ‰å®‰è£…é¡ºåºæ’åˆ—çš„æœåŠ¡åˆ—è¡¨

    Raises:
        CircularDependencyError: å¦‚æœå­˜åœ¨å¾ªç¯ä¾èµ–

    Example:
        >>> services = [user_service, order_service, db_service]
        >>> order = resolve_dependencies(services)
        >>> # order = [db_service, user_service, order_service]
    """
    pass
```

#### ç¤ºä¾‹ 2ï¼šç¼“å­˜ç®¡ç†å‡½æ•°

```python
def get_cached_user(key: str, ttl: int = 3600) -> Optional[User]:
    """æ™ºèƒ½ç¼“å­˜ç®¡ç†å™¨ï¼šè‡ªåŠ¨å†³å®šä½•æ—¶æ›´æ–°ç¼“å­˜

    è¿™ä¸ªå‡½æ•°å°±åƒä¸€ä¸ª"æ™ºèƒ½ç®¡å®¶"ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œ
    å¦‚æœè¿‡æœŸäº†å°±æ›´æ–°ï¼Œæ²¡è¿‡æœŸå°±ç›´æ¥ä½¿ç”¨ï¼Œè®©ä½ ä¸ç”¨æ¯æ¬¡éƒ½æ‰‹åŠ¨æ£€æŸ¥ã€‚

    ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ
    --------------------

    å‡è®¾ä½ æœ‰ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ç¼“å­˜ï¼š
    - å¦‚æœæ¯æ¬¡éƒ½å»æ•°æ®åº“æŸ¥è¯¢ï¼Œä¼šå¾ˆæ…¢
    - å¦‚æœä¸€ç›´ç”¨ç¼“å­˜ï¼Œæ•°æ®å¯èƒ½è¿‡æœŸ

    è¿™ä¸ªå‡½æ•°å¸®ä½ è‡ªåŠ¨å¤„ç†è¿™ä¸ªå¹³è¡¡ï¼šéœ€è¦æ—¶æ›´æ–°ï¼Œä¸éœ€è¦æ—¶ç”¨ç¼“å­˜ã€‚

    å·¥ä½œåŸç†
    --------

    å°±åƒæ£€æŸ¥å†°ç®±é‡Œçš„é£Ÿç‰©æ˜¯å¦è¿‡æœŸï¼š

    1. **æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨**ï¼šçœ‹çœ‹å†°ç®±é‡Œæœ‰æ²¡æœ‰è¿™ä¸ªé£Ÿç‰©
    2. **æ£€æŸ¥æ˜¯å¦è¿‡æœŸ**ï¼šçœ‹çœ‹é£Ÿç‰©çš„ä¿è´¨æœŸè¿‡äº†æ²¡æœ‰
       - å¦‚æœæ²¡è¿‡æœŸï¼šç›´æ¥ä½¿ç”¨ï¼ˆè¿”å›ç¼“å­˜çš„æ•°æ®ï¼‰
       - å¦‚æœè¿‡æœŸäº†ï¼šé‡æ–°è·å–ï¼ˆå»è¶…å¸‚ä¹°æ–°çš„ï¼Œæ›´æ–°ç¼“å­˜ï¼‰
    3. **è¿”å›ç»“æœ**ï¼šç»™ä½ æœ€æ–°çš„æ•°æ®

    å®é™…ä½¿ç”¨åœºæ™¯
    -----------

    é€‚ç”¨äºéœ€è¦å®šæœŸæ›´æ–°çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€é…ç½®ä¿¡æ¯ç­‰ï¼š

    ```python
    # è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆè‡ªåŠ¨å¤„ç†ç¼“å­˜ï¼‰
    user = get_cached_user(user_id)

    # å¦‚æœç¼“å­˜è¿‡æœŸï¼Œä¼šè‡ªåŠ¨ä»æ•°æ®åº“è·å–æœ€æ–°æ•°æ®
    # å¦‚æœç¼“å­˜æœ‰æ•ˆï¼Œç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼Œé€Ÿåº¦å¾ˆå¿«
    ```

    ç¼“å­˜ç­–ç•¥
    -------

    - **æ—¶é—´è¿‡æœŸ**ï¼šç¼“å­˜è¶…è¿‡æŒ‡å®šæ—¶é—´åè‡ªåŠ¨è¿‡æœŸ
    - **ç‰ˆæœ¬è¿‡æœŸ**ï¼šå¦‚æœæ•°æ®ç‰ˆæœ¬å·å˜åŒ–ï¼Œç¼“å­˜è‡ªåŠ¨å¤±æ•ˆ
    - **æ‰‹åŠ¨åˆ·æ–°**ï¼šå¯ä»¥æ‰‹åŠ¨è°ƒç”¨åˆ·æ–°ç¼“å­˜

    Args:
        key: ç¼“å­˜çš„é”®ï¼ˆå°±åƒé£Ÿç‰©çš„åç§°ï¼‰
        ttl: ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ï¼Œå°±åƒé£Ÿç‰©çš„ä¿è´¨æœŸï¼Œé»˜è®¤ 3600 ç§’

    Returns:
        ç¼“å­˜çš„å€¼ï¼ˆå¯èƒ½æ˜¯æ—§çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯åˆšæ›´æ–°çš„ï¼‰ï¼Œå¦‚æœè·å–å¤±è´¥è¿”å› None

    Example:
        >>> user = get_cached_user("user_123", ttl=7200)
        >>> print(user.name)
    """
    pass
```

### äººæ€§åŒ–æ³¨é‡Šæ£€æŸ¥æ¸…å•

ç¼–å†™å¤æ‚å‡½æ•°æ³¨é‡Šæ—¶ï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] **æœ‰é€šä¿—æ˜“æ‡‚çš„ç±»æ¯”**ï¼šç”¨ç†Ÿæ‚‰çš„æ¦‚å¿µè§£é‡Šå¤æ‚æ¦‚å¿µ
- [ ] **è§£é‡Šäº†"ä¸ºä»€ä¹ˆ"**ï¼šè¯´æ˜å‡½æ•°è§£å†³ä»€ä¹ˆé—®é¢˜
- [ ] **åˆ†æ­¥éª¤è¯´æ˜**ï¼šå°†å¤æ‚è¿‡ç¨‹åˆ†è§£ä¸ºæ¸…æ™°æ­¥éª¤
- [ ] **æä¾›ä½¿ç”¨åœºæ™¯**ï¼šè¯´æ˜ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è¿™ä¸ªå‡½æ•°
- [ ] **è¯´æ˜å¯èƒ½çš„é—®é¢˜**ï¼šæå‰å‘ŠçŸ¥å¯èƒ½é‡åˆ°çš„é—®é¢˜
- [ ] **é¿å…è¿‡åº¦æŠ€æœ¯åŒ–**ï¼šç”¨æ—¥å¸¸è¯­è¨€ï¼Œå°‘ç”¨ä¸“ä¸šæœ¯è¯­
- [ ] **æä¾›å®Œæ•´ç¤ºä¾‹**ï¼šåŒ…å«å®é™…å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
- [ ] **è§£é‡Šå…³é”®å†³ç­–**ï¼šè¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·å®ç°

### å¸¸è§æŠ€æœ¯æœ¯è¯­çš„é€šä¿—è§£é‡Š

| æŠ€æœ¯æœ¯è¯­     | é€šä¿—è§£é‡Š                                                         | ä½¿ç”¨åœºæ™¯ |
| ------------ | ---------------------------------------------------------------- | -------- |
| **æ‹“æ‰‘æ’åº** | å°±åƒæ•´ç†ä»»åŠ¡æ¸…å•ï¼Œæ‰¾å‡ºå…ˆåšä»€ä¹ˆååšä»€ä¹ˆ                           | ä¾èµ–è§£æ |
| **ä¾èµ–æ³¨å…¥** | å°±åƒç‚¹å¤–å–ï¼Œä½ ä¸éœ€è¦çŸ¥é“æ€ä¹ˆåšï¼Œåªéœ€è¦è¯´ä½ è¦ä»€ä¹ˆï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½  | æœåŠ¡ç®¡ç† |
| **ç¼“å­˜**     | å°±åƒæŠŠå¸¸ç”¨çš„ä¸œè¥¿æ”¾åœ¨æ‰‹è¾¹ï¼Œéœ€è¦æ—¶ç›´æ¥æ‹¿ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å»è¿œå¤„å–       | æ€§èƒ½ä¼˜åŒ– |
| **å¼‚æ­¥**     | å°±åƒåŒæ—¶åšå¤šä»¶äº‹ï¼Œä¸ç”¨ç­‰ä¸€ä»¶äº‹åšå®Œå†åšå¦ä¸€ä»¶                     | å¹¶å‘å¤„ç† |
| **è£…é¥°å™¨**   | å°±åƒç»™å‡½æ•°"ç©¿è¡£æœ"ï¼Œåœ¨ä¸æ”¹å˜å‡½æ•°æœ¬èº«çš„æƒ…å†µä¸‹ç»™å®ƒæ·»åŠ æ–°åŠŸèƒ½         | åŠŸèƒ½å¢å¼º |
| **ç”Ÿæˆå™¨**   | å°±åƒ"æŒ‰éœ€ç”Ÿäº§"ï¼Œéœ€è¦æ—¶æ‰ç”Ÿæˆæ•°æ®ï¼ŒèŠ‚çœå†…å­˜                       | å¤§æ•°æ®å¤„ç† |
| **ä¸Šä¸‹æ–‡ç®¡ç†å™¨** | å°±åƒ"è‡ªåŠ¨å¼€å…³é—¨"ï¼Œè¿›å…¥æ—¶è‡ªåŠ¨æ‰“å¼€ï¼Œé€€å‡ºæ—¶è‡ªåŠ¨å…³é—­                 | èµ„æºç®¡ç† |

---

## ğŸ·ï¸ å˜é‡å‘½åè§„èŒƒ

### æ¦‚è¿°

Python éµå¾ª PEP 8 å‘½åçº¦å®šï¼Œä¸åŒç±»å‹çš„æ ‡è¯†ç¬¦ä½¿ç”¨ä¸åŒçš„å‘½åé£æ ¼ã€‚éµå¾ªè¿™äº›çº¦å®šå¯ä»¥è®©ä»£ç æ›´æ˜“è¯»ã€æ›´ç¬¦åˆ Python ç¤¾åŒºä¹ æƒ¯ã€‚

### å‘½åé£æ ¼å¯¹ç…§è¡¨

| æ ‡è¯†ç¬¦ç±»å‹       | å‘½åé£æ ¼               | ç¤ºä¾‹                           | è¯´æ˜                 |
| ---------------- | ---------------------- | ------------------------------ | -------------------- |
| **ç±»**           | `PascalCase`           | `UserService`, `Middlewares`   | é¦–å­—æ¯å¤§å†™çš„é©¼å³°å‘½å |
| **å¼‚å¸¸**         | `PascalCase`           | `ValueError`, `DependencyError` | é¦–å­—æ¯å¤§å†™çš„é©¼å³°å‘½å |
| **ç±»å‹åˆ«å**     | `PascalCase`           | `ConfigMap`, `UserDict`        | é¦–å­—æ¯å¤§å†™çš„é©¼å³°å‘½å |
| **å‡½æ•°**         | `snake_case`           | `auto_inject_service`, `build` | å°å†™ä¸‹åˆ’çº¿å‘½å       |
| **å˜é‡**         | `snake_case`           | `user_name`, `app_builder`     | å°å†™ä¸‹åˆ’çº¿å‘½å       |
| **æ–¹æ³•**         | `snake_case`           | `get_user`, `process_data`     | å°å†™ä¸‹åˆ’çº¿å‘½å       |
| **æ¨¡å—**         | `snake_case`           | `service`, `plugin`            | å°å†™ä¸‹åˆ’çº¿å‘½å       |
| **åŒ…**           | `snake_case`           | `panda_common`, `panda_data`   | å°å†™ä¸‹åˆ’çº¿å‘½å       |
| **å¸¸é‡**         | `SCREAMING_SNAKE_CASE` | `MAX_SIZE`, `DEFAULT_TIMEOUT`  | å…¨å¤§å†™ä¸‹åˆ’çº¿å‘½å     |
| **ç§æœ‰å˜é‡/æ–¹æ³•** | `_snake_case` æˆ– `__snake_case` | `_internal`, `__private` | å•ä¸‹åˆ’çº¿æˆ–åŒä¸‹åˆ’çº¿å‰ç¼€ |

---

### ç±»å‘½å

#### åŸºæœ¬è§„åˆ™

- ä½¿ç”¨ `PascalCase` å‘½å
- åç§°åº”è¯¥æ˜¯åè¯æˆ–åè¯çŸ­è¯­
- é¿å…ç¼©å†™ï¼Œé™¤éæ˜¯å¹¿æ³›ä½¿ç”¨çš„ï¼ˆå¦‚ `HTTP`, `URL`, `ID`ï¼‰

#### ç¤ºä¾‹

```python
class UserService:
    """ç”¨æˆ·æœåŠ¡ç±»"""
    pass

class Middlewares:
    """ä¸­é—´ä»¶é…ç½®ç±»"""
    pass

class HttpRequestConfig:
    """HTTP è¯·æ±‚é…ç½®ç±»"""
    pass
```

---

### å‡½æ•°å’Œå˜é‡å‘½å

#### åŸºæœ¬è§„åˆ™

- ä½¿ç”¨ `snake_case` å‘½å
- å‡½æ•°ååº”è¯¥æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­
- å˜é‡ååº”è¯¥æ˜¯åè¯æˆ–åè¯çŸ­è¯­
- å¸ƒå°”å˜é‡ä½¿ç”¨ `is_`, `has_`, `should_`, `can_` ç­‰å‰ç¼€

#### å‡½æ•°å‘½åç¤ºä¾‹

```python
def auto_inject_services(app: AppBuilder) -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡"""
    pass

def build_service(registry: Registry) -> Service:
    """ä»æ³¨å†Œè¡¨æ„å»ºæœåŠ¡ç»„ä»¶"""
    pass

def check_user_exists(user_id: int) -> bool:
    """æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨"""
    pass

def get_user_info(user_id: int) -> Optional[User]:
    """è·å–ç”¨æˆ·ä¿¡æ¯"""
    pass
```

#### å˜é‡å‘½åç¤ºä¾‹

```python
def auto_inject_services(app: AppBuilder) -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡"""
    # æ”¶é›†æ‰€æœ‰æœåŠ¡æ³¨å†Œå™¨
    registrars = [r for r in ServiceRegistry.get_all()]
    
    total = len(registrars)
    pending = list(registrars)
    installed = 0
    progress_made = False
    
    # å¾ªç¯å®‰è£…æœåŠ¡
    while pending:
        next_pending = []
        
        # å°è¯•å®‰è£…æ¯ä¸ªå¾…å®‰è£…çš„æœåŠ¡
        for registrar in pending:
            try:
                registrar.install(app)
                installed += 1
                progress_made = True
            except DependencyError:
                next_pending.append(registrar)
        
        pending = next_pending
```

#### å¸ƒå°”å˜é‡å‘½å

```python
# ä½¿ç”¨ is_ å‰ç¼€
is_active = True
is_verified = False
is_empty = len(items) == 0

# ä½¿ç”¨ has_ å‰ç¼€
has_permission = check_permission()
has_children = node.has_children()

# ä½¿ç”¨ should_ å‰ç¼€
should_retry = error.is_retryable()
should_log = log_level >= logging.INFO

# ä½¿ç”¨ can_ å‰ç¼€
can_edit = user.has_permission(Permission.EDIT)
can_delete = user.has_permission(Permission.DELETE)
```

---

### å¸¸é‡å’Œç§æœ‰å˜é‡å‘½å

#### åŸºæœ¬è§„åˆ™

- å¸¸é‡ä½¿ç”¨ `SCREAMING_SNAKE_CASE`ï¼ˆå…¨å¤§å†™ä¸‹åˆ’çº¿ï¼‰
- ç§æœ‰å˜é‡ä½¿ç”¨ `_snake_case`ï¼ˆå•ä¸‹åˆ’çº¿å‰ç¼€ï¼‰
- ç±»ç§æœ‰å˜é‡ä½¿ç”¨ `__snake_case`ï¼ˆåŒä¸‹åˆ’çº¿å‰ç¼€ï¼‰

#### ç¤ºä¾‹

```python
# å¸¸é‡
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30
MAX_REQUEST_BODY_SIZE = 10 * 1024 * 1024  # 10MB

# æ¨¡å—çº§ç§æœ‰å˜é‡
_internal_cache = {}

# ç±»ç§æœ‰å˜é‡
class Service:
    __private_method = None  # åç§°ä¼šè¢«æ”¹å†™ä¸º _Service__private_method
    _protected_method = None  # çº¦å®šä¸ºå—ä¿æŠ¤çš„æ–¹æ³•
```

---

### æ¨¡å—å’ŒåŒ…å‘½å

#### åŸºæœ¬è§„åˆ™

- ä½¿ç”¨ `snake_case` å‘½å
- æ¨¡å—ååº”è¯¥æ˜¯åè¯æˆ–åè¯çŸ­è¯­
- é¿å…ç¼©å†™ï¼Œé™¤éæ˜¯å¹¿æ³›ä½¿ç”¨çš„

#### ç¤ºä¾‹

```python
# æ–‡ä»¶ï¼šservice.py
"""
æœåŠ¡ä¾èµ–æ³¨å…¥æ¨¡å—
"""

# æ–‡ä»¶ï¼šconfig/registry.py
"""
é…ç½®æ³¨å†Œè¡¨æ¨¡å—
"""

# æ–‡ä»¶ï¼šerror/handler.py
"""
é”™è¯¯å¤„ç†æ¨¡å—
"""
```

---

### å‘½åè§„èŒƒæ£€æŸ¥æ¸…å•

#### ç±»å’Œç±»å‹

- [ ] ä½¿ç”¨ `PascalCase` å‘½å
- [ ] åç§°æ¸…æ™°æè¿°ç±»å‹ç”¨é€”
- [ ] é¿å…ä¸å¿…è¦çš„ç¼©å†™

#### å‡½æ•°å’Œå˜é‡

- [ ] ä½¿ç”¨ `snake_case` å‘½å
- [ ] å‡½æ•°åæ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­
- [ ] å˜é‡åæ˜¯åè¯æˆ–åè¯çŸ­è¯­
- [ ] å¸ƒå°”å˜é‡ä½¿ç”¨ `is_`, `has_`, `should_` ç­‰å‰ç¼€

#### å¸¸é‡

- [ ] ä½¿ç”¨ `SCREAMING_SNAKE_CASE` å‘½å
- [ ] åç§°æ¸…æ™°æè¿°å¸¸é‡ç”¨é€”

#### æ¨¡å—å’ŒåŒ…

- [ ] ä½¿ç”¨ `snake_case` å‘½å
- [ ] æ¨¡å—åæ¸…æ™°æè¿°æ¨¡å—åŠŸèƒ½

#### é€šç”¨è¦æ±‚

- [ ] éµå¾ª PEP 8 å‘½åçº¦å®š
- [ ] åç§°å…·æœ‰æè¿°æ€§ï¼Œé¿å…å•å­—æ¯å˜é‡ï¼ˆé™¤éæ˜¯å¾ªç¯å˜é‡ï¼‰
- [ ] é¿å…ä½¿ç”¨ Python å…³é”®å­—ä½œä¸ºæ ‡è¯†ç¬¦
- [ ] ä¿æŒå‘½åä¸€è‡´æ€§

---

## âœ… æ³¨é‡Šè§„èŒƒæ£€æŸ¥æ¸…å•

### æ¨¡å—çº§æ³¨é‡Š

- [ ] åŒ…å«æ¨¡å—çš„ç®€è¦æè¿°
- [ ] è¯´æ˜æ ¸å¿ƒæ¦‚å¿µï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æä¾›ä½¿ç”¨æ–¹å¼æˆ–ç¤ºä¾‹ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] è¯´æ˜æ³¨æ„äº‹é¡¹æˆ–é™åˆ¶ï¼ˆå¦‚éœ€è¦ï¼‰

### å…¬å…± API æ³¨é‡Š

- [ ] åŒ…å«åŠŸèƒ½ç®€è¦æè¿°
- [ ] è¯´æ˜å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰
- [ ] è¯´æ˜è¿”å›å€¼
- [ ] è¯´æ˜å¼‚å¸¸å¤„ç†ï¼ˆå¦‚å¯èƒ½å‡ºé”™ï¼‰
- [ ] æä¾›ä½¿ç”¨ç¤ºä¾‹ï¼ˆå¼ºçƒˆæ¨èï¼‰
- [ ] è¯´æ˜å®ç°è¦æ±‚ï¼ˆå¯¹äºæŠ½è±¡åŸºç±»ï¼‰

### è¡Œå†…æ³¨é‡Š

- [ ] è§£é‡Šå¤æ‚é€»è¾‘
- [ ] è¯´æ˜å…³é”®å†³ç­–
- [ ] é¿å…é‡å¤ä»£ç æœ¬èº«

### é€šç”¨è¦æ±‚

- [ ] ä½¿ç”¨ä¸­æ–‡ç¼–å†™æ³¨é‡Š
- [ ] ä½¿ç”¨ Markdown æ ¼å¼ï¼ˆåœ¨æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼‰
- [ ] ä¿æŒæ³¨é‡Šä¸ä»£ç åŒæ­¥
- [ ] ä»£ç ç¤ºä¾‹å¯ä»¥è¿è¡Œï¼ˆå¦‚ä½¿ç”¨ `>>>` æç¤ºç¬¦ï¼‰

---

## ğŸ¨ æ³¨é‡Šé£æ ¼ç¤ºä¾‹

### å®Œæ•´ç¤ºä¾‹ï¼šæ¨¡å— + ç±» + æ–¹æ³•

```python
"""
æœåŠ¡ä¾èµ–æ³¨å…¥æ¨¡å—

æœ¬æ¨¡å—å®ç°äº†è¿è¡Œæ—¶ä¾èµ–æ³¨å…¥åŠŸèƒ½ï¼Œå…è®¸æœåŠ¡è‡ªåŠ¨æ³¨å…¥ä¾èµ–çš„ç»„ä»¶å’Œé…ç½®ã€‚
"""

from typing import Optional, Dict, Any
from abc import ABC, abstractmethod


class Service(ABC):
    """Service åŸºç±»ï¼šæ”¯æŒä¾èµ–æ³¨å…¥çš„ç‰¹æ®Šç»„ä»¶

    Service æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡å­—æ®µå±æ€§è‡ªåŠ¨æ³¨å…¥ä¾èµ–çš„ç»„ä»¶å’Œé…ç½®ã€‚

    å®ç°è¦æ±‚
    --------

    - å¿…é¡»ç»§æ‰¿ `Service` åŸºç±»
    - å¿…é¡»å®ç° `build()` æ–¹æ³•ï¼Œç”¨äºä»æ³¨å†Œè¡¨æ„å»ºæœåŠ¡å®ä¾‹

    ä½¿ç”¨ç¤ºä¾‹
    --------

    ```python
    class UserService(Service):
        def build(registry: Registry) -> 'UserService':
            db = registry.get_component(Database)
            return UserService(db)
    ```
    """

    @abstractmethod
    def build(self, registry: 'Registry') -> 'Service':
        """ä»æ³¨å†Œè¡¨æ„å»ºæœåŠ¡ç»„ä»¶

        æ­¤æ–¹æ³•ç”±å­ç±»å®ç°ï¼Œä¼šï¼š
        1. ä»ç»„ä»¶æ³¨å†Œè¡¨è·å–æ ‡è®°ä¸º `@inject` çš„å­—æ®µ
        2. ä»é…ç½®æ³¨å†Œè¡¨è·å–æ ‡è®°ä¸º `@inject_config` çš„å­—æ®µ
        3. æ„å»ºå¹¶è¿”å›æœåŠ¡å®ä¾‹

        Args:
            registry: ç»„ä»¶å’Œé…ç½®æ³¨å†Œè¡¨

        Returns:
            æ„å»ºçš„æœåŠ¡å®ä¾‹

        Raises:
            ComponentNotFoundError: å¦‚æœä¾èµ–çš„ç»„ä»¶æœªæ‰¾åˆ°
        """
        pass


def auto_inject_services(app: 'AppBuilder') -> None:
    """è‡ªåŠ¨æ³¨å…¥æ‰€æœ‰æœåŠ¡

    æŸ¥æ‰¾æ‰€æœ‰å·²æ³¨å†Œçš„æœåŠ¡å¹¶å°†å®ƒä»¬å®‰è£…åˆ°åº”ç”¨ä¸­ã€‚

    Args:
        app: åº”ç”¨æ„å»ºå™¨

    Raises:
        DependencyError: å¦‚æœå­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–

    Example:
        >>> app = AppBuilder()
        >>> auto_inject_services(app)
    """
    # æ”¶é›†æ‰€æœ‰æœåŠ¡æ³¨å†Œå™¨
    registrars = [r for r in ServiceRegistry.get_all()]
    
    # å¾ªç¯å®‰è£…æœåŠ¡ï¼Œç›´åˆ°æ‰€æœ‰æœåŠ¡éƒ½å®‰è£…æˆåŠŸ
    pending = list(registrars)
    installed = 0
    
    while pending:
        next_pending = []
        progress_made = False
        
        # å°è¯•å®‰è£…æ¯ä¸ªå¾…å®‰è£…çš„æœåŠ¡
        for registrar in pending:
            try:
                registrar.install(app)
                installed += 1
                progress_made = True
            except DependencyError:
                # å®‰è£…å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ä¾èµ–æœªæ»¡è¶³ï¼‰ï¼Œç­‰å¾…ä¸‹ä¸€è½®
                next_pending.append(registrar)
        
        # å¦‚æœä¸€è½®ä¸­æ²¡æœ‰è¿›å±•ï¼Œè¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–
        if not progress_made and next_pending:
            raise DependencyError("å¾ªç¯ä¾èµ–æˆ–ç¼ºå°‘ä¾èµ–")
        
        pending = next_pending


# å¸¸é‡
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30
```

---

## ğŸ“š ç›¸å…³èµ„æº

- [PEP 8 -- Style Guide for Python Code](https://www.python.org/dev/peps/pep-0008/)
- [PEP 257 -- Docstring Conventions](https://www.python.org/dev/peps/pep-0257/)
- [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html)
- [NumPy Docstring Guide](https://numpydoc.readthedocs.io/en/latest/format.html)
- [Sphinx Documentation](https://www.sphinx-doc.org/)

---

## ğŸ”„ ç‰ˆæœ¬å†å²

- **v1.0.0** (2024-12-11): åˆå§‹ç‰ˆæœ¬ï¼Œå‚è€ƒ Rust ä¸­æ–‡æ³¨é‡Šè§„èŒƒï¼Œé€‚é… Python è¯­è¨€ç‰¹æ€§

---

**ğŸ’¡ æç¤º**ï¼šè‰¯å¥½çš„æ³¨é‡Šæ˜¯ä»£ç å¯ç»´æŠ¤æ€§çš„é‡è¦ä¿éšœã€‚éµå¾ªæœ¬è§„èŒƒï¼Œè®©ä»£ç æ›´æ˜“è¯»ã€æ˜“æ‡‚ã€æ˜“ç»´æŠ¤ã€‚